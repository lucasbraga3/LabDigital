<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../index.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AR Main</title>
</head>

<body>
  <div style="position: absolute; z-index: 1000;" class="inline-flex gap-x-1 origin-left scale-90">
    <button id="example-start-button" class="cursor-pointer rounded-md bg-neutral-950 px-1 py-0.5 text-[10px] text-white border border-neutral-800 shadow-sm shadow-neutral-500/20 transition active:scale-[.95] hover:bg-neutral-900 focus:outline-none focus:ring-1 focus:ring-neutral-500">Start</button>
    <button id="example-pause-button" class="cursor-pointer rounded-md bg-neutral-950 px-1 py-0.5 text-[10px] text-white border border-neutral-800 shadow-sm shadow-neutral-500/20 transition active:scale-[.95] hover:bg-neutral-900 focus:outline-none focus:ring-1 focus:ring-neutral-500">Pause</button>
    <button id="example-pause-keep-video-button" class="cursor-pointer rounded-md bg-neutral-950 px-1 py-0.5 text-[10px] text-white border border-neutral-800 shadow-sm shadow-neutral-500/20 transition active:scale-[.95] hover:bg-neutral-900 focus:outline-none focus:ring-1 focus:ring-neutral-500">Pause (keep)</button>
    <button id="example-unpause-button" class="cursor-pointer rounded-md bg-neutral-950 px-1 py-0.5 text-[10px] text-white border border-neutral-800 shadow-sm shadow-neutral-500/20 transition active:scale-[.95] hover:bg-neutral-900 focus:outline-none focus:ring-1 focus:ring-neutral-500">UnPause</button>
    <button id="example-stop-button" class="cursor-pointer rounded-md bg-neutral-950 px-1 py-0.5 text-[10px] text-white border border-neutral-800 shadow-sm shadow-neutral-500/20 transition active:scale-[.95] hover:bg-neutral-900 focus:outline-none focus:ring-1 focus:ring-neutral-500">Stop</button>
  </div>

  <div id="ar-container" style="flex : 1; display: flex; justify-content: center; align-items: center; width: 100%; height: 100vh;">
    <!-- Cenas AR serão carregadas aqui -->
  </div>
  <script type="module">
    import { initARControls } from "../scripts/ar-script.js";

    (async () => {
      const container = document.getElementById("ar-container");
      container.innerHTML = "";
      const code = prompt("Digite o código da cena AR: ");
      console.log(code);
      try {
        // const listRes = await fetch("http://localhost:3000/slides");
        // if (!listRes.ok) throw new Error(`Status ${listRes.status}`);
        const res = await fetch(`https://localhost:3000/slides/${code}`);
        container.innerHTML = res.ok ? await res.text() : "<p style='color:red'>Falha ao carregar cena AR, verifique seu código.</p>";
        // Initialize AR controls after loading the scenes
        initARControls();

      } catch (err) {
        console.error("Erro ao carregar cenas AR:", err);
        container.innerHTML = "<p style='color:red'>Falha ao carregar cenas AR.</p>";
      }
    })();
  </script>
</body>
</html>
